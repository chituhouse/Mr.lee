# 三平台字段统一方案

> 目标：微博、抖音、今日头条字段完全一致

---

## 当前状态对比

| 字段名 | 微博 | 抖音 | 头条 | 说明 |
|--------|------|------|------|------|
| **基础字段** ||||
| 标题 | ✅ | ✅ | ✅ | 一致 |
| 排名 | ✅ | ✅ | ✅ | 一致 |
| 热度 | ✅ | ✅ | ✅ | 一致 |
| 增长值 | ✅ | ✅ | ✅ | 一致 |
| 排名变化 | ✅ | ✅ | ✅ | 一致 |
| 日增长值 | ✅ | ✅ | ✅ | 一致 |
| 状态 | ✅ | ✅ | ✅ | 一致 |
| 链接 | ✅ | ✅ | ✅ | 一致 |
| 抓取时间 | ✅ | ✅ | ✅ | 一致 |
| **豆包AI字段** ||||
| 适配度（AI） | ✅单选AI | ❌普通单选 | ❌普通单选 | **不一致** |
| 文字梗挖掘（AI） | ❌缺失 | ❌缺失 | ❌缺失 | **都缺** |
| 老李金句（AI） | ✅ | ✅ | ✅ | 一致 |
| **Claude版字段** ||||
| 适配度（Claude） | ❌缺失 | ❌缺失 | ❌缺失 | **都缺** |
| 文字梗（Claude） | ❌缺失 | ❌缺失 | ❌缺失 | **都缺** |
| 老李金句（Claude） | ❌缺失 | ❌缺失 | ❌缺失 | **都缺** |
| 推荐理由（Claude） | ✅ | ✅ | ❌缺失 | **不一致** |
| **确认快照字段** ||||
| 确认版适配度 | ❌缺失 | ❌缺失 | ❌缺失 | **都缺** |
| 确认版金句 | ✅ | ✅ | ✅ | 一致 |
| 已确认 | ❌缺失 | ✅ | ✅ | **不一致** |
| 推荐到选题池 | ✅ | ✅ | ✅ | 一致 |
| **遗留字段** ||||
| 适配度（普通） | ❌ | ✅ | ✅ | 需删除 |
| 老李金句（普通） | ❌ | ✅ | ✅ | 需删除 |

---

## 标准字段清单（v2.0）

### 基础字段（9个）
1. 标题
2. 排名
3. 热度
4. 增长值
5. 排名变化
6. 日增长值
7. 状态
8. 链接
9. 抓取时间

### 豆包AI字段（3个）
10. 适配度（AI）- 单选AI字段
11. 文字梗挖掘（AI）- 多行文本AI字段
12. 老李金句（AI）- 多行文本AI字段

### Claude版字段（4个）
13. 适配度（Claude）- 单选
14. 文字梗（Claude）- 多行文本
15. 老李金句（Claude）- 多行文本
16. 推荐理由（Claude）- 多行文本

### 确认快照字段（4个）
17. 确认版适配度 - 单选
18. 确认版金句 - 多行文本
19. 已确认 - 复选框
20. 推荐到选题池 - 复选框

**总计：20个字段**

---

## 执行脚本

创建一个统一字段的脚本：

```javascript
// scripts/unify-fields.js
// 为3个平台统一字段

const OPERATIONS = {
  weibo: [
    { action: 'add', name: '文字梗挖掘（AI）', type: 'AI字段' },
    { action: 'add', name: '适配度（Claude）', type: '单选' },
    { action: 'add', name: '文字梗（Claude）', type: '多行文本' },
    { action: 'add', name: '老李金句（Claude）', type: '多行文本' },
    { action: 'add', name: '确认版适配度', type: '单选' },
    { action: 'add', name: '已确认', type: '复选框' },
  ],

  douyin: [
    { action: 'update', oldName: '适配度', newName: '适配度（AI）', type: 'AI字段' },
    { action: 'add', name: '文字梗挖掘（AI）', type: 'AI字段' },
    { action: 'add', name: '适配度（Claude）', type: '单选' },
    { action: 'add', name: '文字梗（Claude）', type: '多行文本' },
    { action: 'add', name: '老李金句（Claude）', type: '多行文本' },
    { action: 'add', name: '推荐理由（Claude）', type: '多行文本' },
    { action: 'add', name: '确认版适配度', type: '单选' },
    { action: 'delete', name: '老李金句' }, // 删除普通版
  ],

  toutiao: [
    { action: 'update', oldName: '适配度', newName: '适配度（AI）', type: 'AI字段' },
    { action: 'add', name: '文字梗挖掘（AI）', type: 'AI字段' },
    { action: 'add', name: '适配度（Claude）', type: '单选' },
    { action: 'add', name: '文字梗（Claude）', type: '多行文本' },
    { action: 'add', name: '老李金句（Claude）', type: '多行文本' },
    { action: 'add', name: '推荐理由（Claude）', type: '多行文本' },
    { action: 'add', name: '确认版适配度', type: '单选' },
    { action: 'delete', name: '老李金句' }, // 删除普通版
  ],
};
```

---

## 执行步骤

### 方案A：手动配置（推荐）
1. 打开飞书多维表格 Web 端
2. 按上面的操作清单逐个添加/修改字段
3. AI字段需要重新配置Prompt（参考之前的配置清单）

### 方案B：半自动化
1. 普通字段用脚本创建
2. AI字段手动配置（API无法创建）
3. 字段重命名手动操作（API不支持）

### 方案C：暴力重建（不推荐）
1. 备份现有数据
2. 删除所有字段
3. 用脚本统一创建
4. 导入数据
5. ⚠️ 风险高，不推荐

---

## 推荐执行顺序

1. **先执行删除知乎B站**（代码已改）
2. **Git提交并部署**
3. **手动统一3个表字段**（按标准清单）
4. **配置豆包AI字段**（3个表）
5. **运行Skill2生成Claude版**（测试）
6. **开始AB测试**（1-2周）

---

## 验证清单

配置完成后，检查每个表是否有20个字段：

```bash
# 验证脚本
node scripts/verify-fields.js
```

输出应该类似：
```
✓ 微博热搜表：20个字段（完整）
✓ 抖音热搜表：20个字段（完整）
✓ 今日头条热搜表：20个字段（完整）
```

---

**建议**：字段统一工作量不小，建议分2步：
1. 先删除知乎B站并部署（今天）
2. 字段统一留待明天手动操作（避免出错）
